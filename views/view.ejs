<html>
<head>
    <meta charset="utf-8">
    <title>capstone design2</title> 
</head>

<body>
    <h1>mobility map</h1>
    <div id="map" style="width:100%;height:500px;"></div>
    <h3><a href="/bike">ğŸš²ë”°ë¦‰ì´ ëŒ€ì—¬ì†Œ ìœ„ì¹˜ ë³´ê¸°</a></h3>
    <h3><a href='/bikeapi'>ğŸš©ë”°ë¦‰ì´ ì‹¤ì‹œê°„ í˜„í™©ì •ë³´ ë³´ê¸°</a></h3>

    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=<%= appkey %>"></script>
    <script>
    var mapContainer = document.getElementById('map'), 
        mapOption = { 
            center: new kakao.maps.LatLng(37.5973, 127.0520), 
            level: 4 
        };

    var map = new kakao.maps.Map(mapContainer, mapOption); 

    var positions = [
        {
            content: '<div>íšŒê¸°ì—­ 2ë²ˆ ì¶œêµ¬</div>',
            latlng: new kakao.maps.LatLng(37.58945084, 127.0595627)
        },
        {
            content: '<div>ê²½í¬ëŒ€í•™êµ ì²­ìš´ê´€</div>',
            latlng: new kakao.maps.LatLng(37.59460068, 127.0519714)
        },
        {
            content: '<div>ê¿ˆë§ˆë£¨ì–´ë¦°ì´ë„ì„œê´€ ì•</div>',
            latlng: new kakao.maps.LatLng(37.59238434, 127.0574112)
        },
        {
            content: '<div>KAIST ê²½ì˜ëŒ€í•™ ì•</div>',
            latlng: new kakao.maps.LatLng(37.59161377, 127.0457916)
        }
];


for (var i = 0; i < positions.length; i ++) {
    var marker = new kakao.maps.Marker({
        map: map, 
        position: positions[i].latlng
    });
    
    var infowindow = new kakao.maps.InfoWindow({
        content: positions[i].content
    });

    kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
    kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
}

function makeOverListener(map, marker, infowindow) {
    return function() {
        infowindow.open(map, marker);
    };
}

function makeOutListener(infowindow) {
    return function() {
        infowindow.close();
    };
}
    </script>
</body>
</html>